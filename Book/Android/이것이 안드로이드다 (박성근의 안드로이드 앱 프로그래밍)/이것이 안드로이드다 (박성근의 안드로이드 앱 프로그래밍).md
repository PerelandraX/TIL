# 이것이 안드로이드다 (박성근의 안드로이드 앱 프로그래밍) 요약

http://www.yes24.com/24/Goods/13950202?Acode=101

다음의 내용의 `이것이 안드로이드다 (박성근의 안드로이드 앱 프로그래밍)`을 읽고 주관적으로 간략하게 정리한 내용입니다. 제대로된 학습을 원하신다면 책을 읽을 것을 권장해드립니다.

---

## 1. 시작하기

## 2. 전문가가 추천하는 최적의 개발 환경 구축하기

## 3. 나의 첫 안드로이드 앱 만들기

## 4. 레이아웃의 구성 요소 View와 ViewGroup

## 5. 대표적인 뷰그룹

## 6. 대표적인 뷰

## 7. 자바로 레이아웃 구성하기

## 8. 이벤트

## 9. 리소스

## 10. 액티비티 실행과 인텐트

## 11. 액티비티 생명주기

## 12. 태스크

## 13. 액티비티 간 데이터 주고받기

## 14. 안드로이드 프로세스와 스레드

## 15. 브로드캐스트 리시버

## 16. 파일과 데이터베이스

## 17. 콘텐트 프로바이더

## 18. 서비스

---

## 19. 애플리케이션 객체

* 안드로이드 앱은 액티비티, 서비스, 브로드캐스트 리시버, 콘텐트 프로바이더 네가지 컴포넌트로 구성된다.
* 그 컴포넌트 상위에는 익숙하지 않는 객체가 하나 존재하는데 그것이 바로 애플리케이션이다.
* 애플리케이션 객체가 상위에 있다고 하여 컴포넌트를 관리하는 기능을 하는 것은 아니고 클래스 구조상 상속 관계도 아니다.
* 분명한건 애플리케이션 객체는 논리적으로 모든 컴포넌트를 아우르고 각각의 컴포넌트에서 애플리케이션 객체에 자유롭게 접근이 가능하다는 것이다.

### 19.1. 애플리케이션 객체

#### 19.1.1. 애플리케이션 객체의 존재

* 애플리케이션 객체는 매우 익숙한 곳에 존재하고 있다. 바로 AndroidManifest.xml의 application 요소이다.
* application 요소 하위에는 각종 안드로이드 컴포넌트가 포함되고 icon, label, theme 등의 속성이 적용된다.

#### 19.1.2. 애플리케이션 재정의와 생명주기

* 애플리케이션을 상속받아 구현한 후 AndroidManifest.xml에 재정의한 애플리케이션을 사용할 수 있다.
* 재정의시 application 요소의 name 속성에 재정의한 클래스를 참조하도록 수정하면 된다.
* 애플리케이션의 생성과 소멸에 대한 두가지 생명주기 함수는 onCreate, onTerminate이다.
* onTerminate 함수는 BackKey로 앱을 종료했을때 다음번에 다시 해당앱 실행시 빠르게 동작하기 위해 호출되지 않는다.
* 마찬가지로 BackKey로 앱 종료 후 앱 재시작시 처음 앱 실행과는 다르게 애플리케이션 onCreate 함수도 호출되지 않는다.
* 애플리케이션 객체는 앱의 프로세스 그 자체라고 볼 수 있다.
* 애플리케이션의 onCreate 생명주기 함수는 다른 컴포넌트보다 먼저 호출되므로 컴포넌트의 빠른 실행을 위해 최대한 빠르게 반환되어야 한다.

### 19.2. 애플리케이션 객체를 이용한 컴포넌트 간 데이터 공유

* 모든 컴포넌트는 애플리케이션 객체로 접근이 가능하다.
* 특정 컴포넌트에서 애플리케이션 객체에 접근하여 데이터를 저장하고 다른 컴포넌트에서 저장된 객체를 참조할 수 있다.
* 이에 컴포넌트간에 데이터를 주고받는 방법으로 활용될 수 있다.

#### 19.2.1. 액티비티 간 데이터 공유

* 액티비티 간에 데이터를 전달하는 정상적이고 안전한 방법은 인텐트를 사용하여 startActivity, startActivityForResult 함수를 사용하는 것이다.
* 액티비티 수가 많아지고 모든 액티비티가 공통된 정보를 공유해야 한다면 복잡하고 불편한 인텐트를 사용하지 않고 애플리케이션 객체를 이용하여 데이터를 공유할 수 있다.
* A 액티비티에서 애플리케이션 객체를 얻어와 데이터를 저장하고, B 액티비티 onCreate 함수에서 애플리케이션 객체에서 데이터를 가져오게 구현한 후 B 액티비티를 실행하면 정상적으로 데이터를 가져온다.

#### 19.2.2. 다른 컴포넌트 간 데이터 공유

* 서비스(onCreate), 브로드캐스트 리시버(onReceive), 콘텐트 프로바이더(insert)도 각각의 함수에서 애플리케이션 객체에 접근해 정상적으로 데이터를 가져올 수 있다.
* 애플리케이션은 하나의 패키지안에 하나씩만 존재하므로 다른 패키지 컴포넌트에서는 참조가 불가능하다.
* 애플리케이션 객체는 앱 프로세스가 존재하는 동안 종료되지 않으므로 각각의 컴포넌트가 데이터를 저장하기만 하고 종료시점에 데이터를 제거하지 않아 메모리 누수가 발생한다면 OOM에 빠질 수 있으므로 조심히 사용해야 한다.

### 19.3. 애플리케이션의 액티비티 생명주기 콜백 인터페이스

* API 14부터 애플리케이션에 액티비티 생명주기 콜백 인터페이스가 추가되었다.
* 이 콜백 인터페이스를 사용하면 패키지에 포함된 모든 액티비티의 생명주기를 관찰하고 처리할 수 있다.

#### 19.3.1. ActivityLifecycleCallbacks 인터페이스

* 재정의된 애플리케이션 객체에서 ActivityLifecycleCallbacks를 구현하고 onCreate 함수에서 registerActivityLifecycleCallbacks 함수로 등록하면 동작하게 된다.
* 액티비티 생명주기 onCreate, onStart, onResume, onPause, onStop, onDestroy에 대응하여 onActivityCreated, onActivityStarted, onActivityResumed, onActivityStopped, onActivityDestroyed 콜백함수가 호출된다. 

#### 19.3.2. ActivityLifecycleCallbacks를 활용한 앱 종료

* ActivityLifecycleCallbacks를 활용하여 많은 액티비티 스택이 쌓여 있는 상태에서 한번에 앱 종료 기능을 구현할 수 있다. (예제 19-18)
* API 16 젤리빈부터 실행된 모든 액티비티를 한꺼번에 종료하는 Activity.finishAffinity 함수가 추가되어 굳이 ActivityLifecycleCallbacks를 활용할 필요는 없다.

### 19.3. 마치며

* 애플리케이션 객체는 모든 컴포넌트에서 매우 쉽게 접근하여 사용할 수 있다는 큰 장점이 있다.
* 불필요한 데이터까지 저장하여 메모리를 부족해지게 만들고 앱을 느려지게 하지 않도록 주의하자.

---

## 20. 제한된 화면 크기를 극복하기 위한 뷰그룹

## 21. 윈도우
